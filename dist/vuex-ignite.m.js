var e=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},n=function(e){return e!==Object(e)},t=function(e){switch(e){case Boolean:return!1;case Number:return 0;case Object:return null;case String:return"";case Array:return null;default:return}},r="firebase/SET",a="firebase/LIST_INIT",i="firebase/LIST_ADD",u="firebase/LIST_CHANGE",s="firebase/LIST_REMOVE",c="firebase/LIST_MOVE",o="firebase/ACTION";function f(f){var l;f=Object.assign({state:{},mutations:{},actions:{},plugins:[]},f);var y=[];for(var v in f.firebase){var d=f.firebase[v],k=("Query"===d.constructor.name?void 0:d.ref)||d,m=k.constructor.name;if("Reference"===m||"Function"===m||"Query"===m){var b=d.type||Array;f.state[v]=t(b),y.push({name:v,ref:k,type:b})}else f.state[v]=!1,l={name:v,auth:k}}return f.mutations[a]=function(e,n){return e[n.key]=[]},f.mutations[r]=function(e,n){return e[n.key]=n.value},f.mutations[i]=function(e,n){var t=n.key;return e[t]=e[t].concat([n.value])},f.mutations[u]=function(e,n){var t=n.key,r=n.value,a=e[t].findIndex(function(e){return e[".key"]===r[".key"]});e[t]=[].concat(e[t]),e[t].splice(a,1,r)},f.mutations[s]=function(e,n){var t=n.key,r=n.listKey;return e[t]=e[t].filter(function(e){return e[".key"]!==r})},f.mutations[c]=function(e,n){var t=n.key,r=n.listKey,a=n.prevListKey,i=e[t].findIndex(function(e){return e[".key"]===r}),u=null!==a?e[t].findIndex(function(e){return e[".key"]===a}):0;e[t]=[].concat(e[t]),e[t].splice(u,0,e[t].splice(i,1)[0])},f.actions[o]=function(o,f){for(var l=o.commit,y=f.authBinding,v=f.store,d=function(e,t,o){v.$firebaseRefs[o]=t.ref||t,e===Array?t.once("value",function(){l(a,{key:o}),t.on("child_added",function(e){var t=e.val();l(i,{key:o,value:Object.assign({},{".key":e.key},n(t)?{".value":t}:t)})}),t.on("child_changed",function(e){var t=e.val();l(u,{key:o,value:Object.assign({},{".key":e.key},n(t)?{".value":t}:t)})}),t.on("child_removed",function(e){return l(s,{key:o,listKey:e.key})}),t.on("child_moved",function(e,n){return l(c,{key:o,listKey:e.key,prevListKey:n})})}):t.on("value",function(e){return l(r,{key:o,value:e.val()})})},k=[],m=0,b=f.normalisedBindings;m<b.length;m+=1){var p=b[m];e(p.ref)?k.push(p):d(p.type,p.ref,p.name)}y&&y.auth.onAuthStateChanged(function(e){for(var n=0,a=k;n<a.length;n+=1){var i=a[n];if(i.currentRef&&i.currentRef.off(),v.$firebaseRefs[i.name]&&delete v.$firebaseRefs[i.name],e){var u=i.ref(e);i.currentRef=u,d(i.type,u,i.name)}else l(r,{key:i.name,value:t(i.type)})}l(r,{key:y.name,value:e})})},f.plugins.push(function(e){e.$firebaseRefs={},e.dispatch(o,{authBinding:l,normalisedBindings:y,store:e})}),f}export{f as ignite};
//# sourceMappingURL=vuex-ignite.m.js.map
