!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.VuexIgnite={})}(this,function(e){var n=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},t=function(e){return e!==Object(e)},r=function(e){switch(e){case Boolean:return!1;case Number:return 0;case Object:return null;case String:return"";case Array:return null;default:return}},i="firebase/SET",a="firebase/LIST_INIT",u="firebase/LIST_ADD",o="firebase/LIST_CHANGE",f="firebase/LIST_REMOVE",s="firebase/LIST_MOVE",c="firebase/ACTION";e.ignite=function(e){var l;e=Object.assign({state:{},mutations:{},actions:{},plugins:[]},e);var y=[];for(var v in e.firebase){var d=e.firebase[v],m=("Query"===d.constructor.name?void 0:d.ref)||d,k=m.constructor.name;if("Reference"===k||"Function"===k||"Query"===k){var p=d.type||Array;e.state[v]=r(p),y.push({name:v,ref:m,type:p})}else e.state[v]=!1,l={name:v,auth:m}}return e.mutations[a]=function(e,n){return e[n.key]=[]},e.mutations[i]=function(e,n){return e[n.key]=n.value},e.mutations[u]=function(e,n){var t=n.key;return e[t]=e[t].concat([n.value])},e.mutations[o]=function(e,n){var t=n.key,r=n.value,i=e[t].findIndex(function(e){return e[".key"]===r[".key"]});e[t]=[].concat(e[t]),e[t].splice(i,1,r)},e.mutations[f]=function(e,n){var t=n.key,r=n.listKey;return e[t]=e[t].filter(function(e){return e[".key"]!==r})},e.mutations[s]=function(e,n){var t=n.key,r=n.listKey,i=n.prevListKey,a=e[t].findIndex(function(e){return e[".key"]===r}),u=null!==i?e[t].findIndex(function(e){return e[".key"]===i}):0;e[t]=[].concat(e[t]),e[t].splice(u,0,e[t].splice(a,1)[0])},e.actions[c]=function(e,c){for(var l=e.commit,y=c.authBinding,v=c.store,d=function(e,n,r){v.$firebaseRefs[r]=n.ref||n,e===Array?n.once("value",function(){l(a,{key:r}),n.on("child_added",function(e){var n=e.val();l(u,{key:r,value:Object.assign({},{".key":e.key},t(n)?{".value":n}:n)})}),n.on("child_changed",function(e){var n=e.val();l(o,{key:r,value:Object.assign({},{".key":e.key},t(n)?{".value":n}:n)})}),n.on("child_removed",function(e){return l(f,{key:r,listKey:e.key})}),n.on("child_moved",function(e,n){return l(s,{key:r,listKey:e.key,prevListKey:n})})}):n.on("value",function(e){return l(i,{key:r,value:e.val()})})},m=[],k=0,p=c.normalisedBindings;k<p.length;k+=1){var b=p[k];n(b.ref)?m.push(b):d(b.type,b.ref,b.name)}y&&y.auth.onAuthStateChanged(function(e){for(var n=0,t=m;n<t.length;n+=1){var a=t[n];if(a.currentRef&&a.currentRef.off(),v.$firebaseRefs[a.name]&&delete v.$firebaseRefs[a.name],e){var u=a.ref(e);a.currentRef=u,d(a.type,u,a.name)}else l(i,{key:a.name,value:r(a.type)})}l(i,{key:y.name,value:e})})},e.plugins.push(function(e){e.$firebaseRefs={},e.dispatch(c,{authBinding:l,normalisedBindings:y,store:e})}),e}});
//# sourceMappingURL=vuex-ignite.umd.js.map
